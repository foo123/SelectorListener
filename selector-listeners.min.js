/**
* https://github.com/foo123/SelectorListener
* @VERSION: 1.2.0
* adapted from https://github.com/csuwildcat/SelectorListener
**/
!function(){"use strict";function e(e,t,r,o){var n=e.length,i=arguments.length;if(4>i&&(o=n-1),0>o&&(o+=n),3>i&&(r=0),r>o)return e;var _,s,l,c,d=o-r+1;for(l=15&d,c=1&l,c&&t(e[r],r,e),_=c;l>_;_+=2)s=r+_,t(e[s],s,e),t(e[++s],s,e);for(_=l;d>_;_+=16)s=r+_,t(e[s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e),t(e[++s],s,e);return e}function t(t){var n=t.target,_=t.animationName,s=i[_]||{};t.selector=s.selector,e((this.selectorListeners||{})[_]||[],function(e){e.call(n,t)}),n._decorateDom(s.attributeModified?o:r),s.removedMutation&&(n.sl__recycled__=0,n.removeAttribute("sl__exist__"),b===n.parentNode&&b.removeChild(n))}function r(e){return e.hasAttribute("sl__exist__")?!1:(e.hasAttribute("sl__removed__")&&e.removeAttribute("sl__removed__"),e.setAttribute("sl__exist__",1),e.setAttribute("sl__class__"," "+e.className+" "),e.sl__removeChild||(e.sl__removeChild=e.removeChild,e.removeChild=function(t){return 1===t.nodeType?(b.appendChild(t),t.sl__recycled__=new Date,t.setAttribute("sl__removed__",1)):e.sl__removeChild(t),t}),e.sl__replaceChild||(e.sl__replaceChild=e.replaceChild,e.replaceChild=function(t,r){return e.sl__replaceChild(t,r),1===r.nodeType&&(b.appendChild(r),r.sl__recycled__=new Date,r.setAttribute("sl__removed__",1)),r}),!0)}function o(e){return e.hasAttribute("sl__exist__")?(e.hasAttribute("sl__removed__")&&e.removeAttribute("sl__removed__"),e.setAttribute("sl__class__"," "+e.className+" "),!1):(e.hasAttribute("sl__removed__")&&e.removeAttribute("sl__removed__"),e.setAttribute("sl__exist__",1),e.setAttribute("sl__class__"," "+e.className+" "),e.sl__removeChild||(e.sl__removeChild=e.removeChild,e.removeChild=function(t){return 1===t.nodeType?(b.appendChild(t),t.sl__recycled__=new Date,t.setAttribute("sl__removed__",1)):e.sl__removeChild(t),t}),e.sl__replaceChild||(e.sl__replaceChild=e.replaceChild,e.replaceChild=function(t,r){return e.sl__replaceChild(t,r),1===r.nodeType&&(b.appendChild(r),r.sl__recycled__=new Date,r.setAttribute("sl__removed__",1)),r}),!0)}function n(){for(var e=new Date,t=2*x,r=b.childNodes.length-1;r>=0;r--){var o=b.childNodes[r];(!o.sl__recycled__||e>t+o.sl__recycled__)&&b.removeChild(o)}}if("object"!=typeof window.SelectorListener){var i={},_={},s="{from {outline-color:#fff;} to {outline-color:#000;}}",l="0.001s",c=/SelectorListener/g,d=/::?exists\b/gi,a=/::?added\b/gi,u=/([^, ]+?)(::?removed)\b/gi,m=/::?class\-added\(([^\(\)]+)\)/gi,h=/::?class\-removed\(([^\(\)]+)\)/gi,p=document.createElement("style"),f=document.createElement("style"),v=document.createElement("style"),y=document.getElementsByTagName("head")[0],b=document.createElement("div"),C=!1,x=1e3,A=["animationstart","oAnimationStart","MSAnimationStart","webkitAnimationStart"],w=function(){var e="animation-duration: "+l+";",t="animation-name: SelectorListener !important;",r=window.getComputedStyle(document.documentElement,""),o=(Array.prototype.slice.call(r).join("").match(/moz|webkit|ms/)||""===r.OLink&&["o"])[0];return{css:"-"+o+"-",properties:"{"+e+t+"-"+o+"-"+e+"-"+o+"-"+t+"}",keyframes:!(!window.CSSKeyframesRule&&!window["WebKit|Moz|MS|O".match(new RegExp("("+o+")","i"))[1]+"CSSKeyframesRule"])}}();p.type=f.type=v.type="text/css",p.setAttribute("sl__exist__",1),f.setAttribute("sl__exist__",1),v.setAttribute("sl__exist__",1),p.appendChild(document.createTextNode("#sl__recycle_bin__{position:absolute;max-height:0 !important;max-width:0 !important;overflow:hidden !important;}#sl__recycle_bin__>*{max-height:0 !important;max-width:0 !important;overflow:hidden !important;}")),y.appendChild(p),y.appendChild(f),y.appendChild(v),b.setAttribute("sl__exist__",1),b.setAttribute("style","position:absolute;max-height:0 !important;max-width:0 !important;overflow:hidden !important;"),b.id="sl__recycle_bin__",HTMLDocument.prototype._decorateDom=function(e){var t,r,o,n=this;if(n=n.getElementsByTagName("body")[0],1!==n.nodeType)return n;if(e(n))for(t=n.childNodes,o=0,r=t.length;r>o;o++)1===t[o].nodeType&&t[o]._decorateDom(e);return n},HTMLElement.prototype._decorateDom=function(e){var t,r,o,n=this;if(1!==n.nodeType)return n;if(e(n))for(t=n.childNodes,o=0,r=t.length;r>o;o++)1===t[o].nodeType&&t[o]._decorateDom(e);return n},HTMLDocument.prototype.addSelectorListener=HTMLElement.prototype.addSelectorListener=function(e,o){if(e&&"function"==typeof o){C?b.parentNode||(document.body.childNodes.length?document.body.insertBefore(b,document.body.firstChild):document.body.appendChild(b)):(document.body.childNodes.length?document.body.insertBefore(b,document.body.firstChild):document.body.appendChild(b),C=!0,setTimeout(function T(){n(),setTimeout(T,x)},x));var l=!1,p=!1,y=e.replace(m,function(e,t){return l=!0,t="."===t.charAt(0)?t.slice(1):t,"[sl__exist__]:not([sl__removed__])."+t+":not([sl__class__~="+t+"])"}).replace(h,function(e,t){return l=!0,t="."===t.charAt(0)?t.slice(1):t,"[sl__exist__]:not([sl__removed__])[sl__class__~="+t+"]:not(."+t+")"}).replace(d,"[sl__exist__]:not([sl__removed__])").replace(u,function(e,t){return p=!0,"#sl__recycle_bin__>"+t+"[sl__exist__][sl__removed__]"}).replace(a,":not([sl__exist__]):not([sl__removed__])"),g=_[y],L=this.selectorListeners=this.selectorListeners||{};if(g)i[g].count++;else{g=_[y]="SelectorListener-"+(new Date).getTime();var S=document.createTextNode("@"+(w.keyframes?w.css:"")+"keyframes "+g+" "+s);v.appendChild(S),f.sheet.insertRule(y+w.properties.replace(c,g),0),i[g]={count:1,selector:e,removedMutation:p,attributeModified:l,keyframe:S,rule:f.sheet.cssRules[0]}}L.count?L.count++:(this._decorateDom(r),L.count=1,A.forEach(function(e){this.addEventListener(e,t,!1)},this)),(L[g]=L[g]||[]).push(o)}},HTMLDocument.prototype.removeSelectorListener=HTMLElement.prototype.removeSelectorListener=function(e,r){if(e){var o=e.replace(m,function(e,t){return t="."===t.charAt(0)?t.slice(1):t,"[sl__exist__]:not([sl__removed__])."+t+":not([sl__class__~="+t+"])"}).replace(h,function(e,t){return t="."===t.charAt(0)?t.slice(1):t,"[sl__exist__]:not([sl__removed__])[sl__class__~="+t+"]:not(."+t+")"}).replace(d,"[sl__exist__]:not([sl__removed__])").replace(u,function(e,t){return"#sl__recycle_bin__>"+t+"[sl__exist__][sl__removed__]"}).replace(a,":not([sl__exist__]):not([sl__removed__])");if(_.hasOwnProperty(o)){var n=this.selectorListeners||{},s=_[o],l=n[s]||[],c=i[s];if("function"==typeof r){var p=l.indexOf(r);p>-1&&(c.count--,c.count||(f.sheet.deleteRule(f.sheet.cssRules.item(c.rule)),v.removeChild(c.keyframe),delete i[s],delete _[o],delete n[s]),n.count--,l.splice(p,1),n.count||A.forEach(function(e){this.removeEventListener(e,t,!1)},this))}else arguments.length<2&&(f.sheet.deleteRule(f.sheet.cssRules.item(c.rule)),v.removeChild(c.keyframe),delete i[s],delete _[o],n.hasOwnProperty(s)&&delete n[s],n.count--,n.count||A.forEach(function(e){this.removeEventListener(e,t,!1)},this))}}},window.SelectorListener={VERSION:"1.2.0",jquery:function(e){"function"!=typeof e.fn.onSelector&&(e.fn.onSelector=function(e,t){return e&&"function"==typeof t&&this.each(function(){this.addSelectorListener(e,t)}),this},e.fn.offSelector=function(e,t){return this.each("function"==typeof t?function(){this.removeSelectorListener(e,t)}:function(){this.removeSelectorListener(e)}),this})}},"undefined"!=typeof jQuery&&window.SelectorListener.jquery(jQuery)}}();