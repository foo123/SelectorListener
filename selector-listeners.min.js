// adapted from https://github.com/csuwildcat/SelectorListener
// https://github.com/foo123/SelectorListener
!function(){"use strict";var e={},t={},o="{from {outline-color:#fff;} to {outline-color:#000;}}",n="0.001s",r=/::?exists\b/gi,i=/::?added\b/gi,s=document.createElement("style"),c=document.createElement("style"),a=document.getElementsByTagName("head")[0],l=["animationstart","oAnimationStart","MSAnimationStart","webkitAnimationStart"],m=function(t){var o=t.target,n=t.animationName,r=e[n]||{};t.selector=r.selector,((this.selectorListeners||{})[n]||[]).forEach(function(e){e.call(o,t)}),o._decorateDom("__existing__",1)},u=function(){var e="animation-duration: "+n+";",t="animation-name: SelectorListener !important;",o=window.getComputedStyle(document.documentElement,""),r=(Array.prototype.slice.call(o).join("").match(/moz|webkit|ms/)||""===o.OLink&&["o"])[0];return{css:"-"+r+"-",properties:"{"+e+t+"-"+r+"-"+e+"-"+r+"-"+t+"}",keyframes:!(!window.CSSKeyframesRule&&!window["WebKit|Moz|MS|O".match(new RegExp("("+r+")","i"))[1]+"CSSKeyframesRule"])}}();s.type=c.type="text/css",a.appendChild(s),a.appendChild(c),HTMLDocument.prototype._decorateDom=function(e,t){var o,n,r,i,s=this;if(s=s.getElementsByTagName("body")[0],1!==s.nodeType)return s;if(o=s.getAttribute(e),!o||t!==o)for(s.setAttribute(e,t),n=s.childNodes,i=0,r=n.length;r>i;i++)1===n[i].nodeType&&n[i]._decorateDom(e,t);return s},HTMLElement.prototype._decorateDom=function(e,t){var o,n,r,i,s=this;if(1!==s.nodeType)return s;if(o=s.getAttribute(e),!o||t!==o)for(s.setAttribute(e,t),n=s.childNodes,i=0,r=n.length;r>i;i++)1===n[i].nodeType&&n[i]._decorateDom(e,t);return s},HTMLDocument.prototype.addSelectorListener=HTMLElement.prototype.addSelectorListener=function(n,a){var d=n.replace(r,"[__existing__]").replace(i,":not([__existing__])"),p=t[d],f=this.selectorListeners=this.selectorListeners||{};if(p)e[p].count++;else{p=t[d]="SelectorListener-"+(new Date).getTime();var h=document.createTextNode("@"+(u.keyframes?u.css:"")+"keyframes "+p+" "+o);c.appendChild(h),s.sheet.insertRule(d+u.properties.replace(/SelectorListener/g,p),0),e[p]={count:1,selector:n,keyframe:h,rule:s.sheet.cssRules[0]}}f.count?f.count++:(this._decorateDom("__existing__",1),f.count=1,l.forEach(function(e){this.addEventListener(e,m,!1)},this)),(f[p]=f[p]||[]).push(a)},HTMLDocument.prototype.removeSelectorListener=HTMLElement.prototype.removeSelectorListener=function(o,n){if(o){var a=o.replace(r,"[__existing__]").replace(i,":not([__existing__])");if(t.hasOwnProperty(a)){var u=this.selectorListeners||{},d=t[a],p=u[d]||[],f=e[d];if("function"==typeof n){var h=p.indexOf(n);h>-1&&(f.count--,f.count||(s.sheet.deleteRule(s.sheet.cssRules.item(f.rule)),c.removeChild(f.keyframe),delete e[d],delete t[a],delete u[d]),u.count--,p.splice(h,1),u.count||l.forEach(function(e){this.removeEventListener(e,m,!1)},this))}else arguments.length<3&&(s.sheet.deleteRule(s.sheet.cssRules.item(f.rule)),c.removeChild(f.keyframe),delete e[d],delete t[a],u.hasOwnProperty(d)&&delete u[d],u.count--,u.count||l.forEach(function(e){this.removeEventListener(e,m,!1)},this))}}}}();